<link href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<style>
  br {line-height:40px;}
  .storage {display:none;}
</style>
<section class="section">
<div class="container">
  <div class="columns">
    <div class="column">
      <table class="table is-bordered is-size-3 has-text-centered">
        <tbody>
          <tr>
            <th id="num1" class="has-text-centered" onclick="swapValues('num1')"></th>
            <th id="num2" class="has-text-centered" onclick="swapValues('num2')"></th>
            <th id="num3" class="has-text-centered" onclick="swapValues('num3')"></th>
            <th id="num4" class="has-text-centered" onclick="swapValues('num4')"></th>
          </tr>
          <tr>
            <th id="num5" class="has-text-centered" onclick="swapValues('num5')"></th>
            <th id="num6" class="has-text-centered" onclick="swapValues('num6')"></th>
            <th id="num7" class="has-text-centered" onclick="swapValues('num7')"></th>
            <th id="num8" class="has-text-centered" onclick="swapValues('num8')"></th>
          </tr>
          <tr>
            <th id="num9" class="has-text-centered" onclick="swapValues('num9')"></th>
            <th id="num10" class="has-text-centered" onclick="swapValues('num10')"></th>
            <th id="num11" class="has-text-centered" onclick="swapValues('num11')"></th>
            <th id="num12" class="has-text-centered" onclick="swapValues('num12')"></th>
          </tr>
          <tr>
            <th id="num13" class="has-text-centered" onclick="swapValues('num13')"></th>
            <th id="num14" class="has-text-centered" onclick="swapValues('num14')"></th>
            <th id="num15" class="has-text-centered" onclick="swapValues('num15')"></th>
            <th id="num16" class="has-text-centered" onclick="swapValues('num16')"></th>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="column">
      <div id="temp" class="storage"></div>
      <div id="temp1" class="storage"></div><br>
      <progress id="progress" class="progress is-primary" value="0" max="100"></progress></div>
  </div>
  <div class="modal" id="congrats">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="notification is-success is-size-3 has-text-centered">
        Congratulations!<br><a class="button is-light is-large" onclick="refreshPage()">Play Again!</a>
      </div>
    </div>
  </div>
</div>
</section>
<script>
window.onload = function randomNumbers() {
  var numbers = [];
  var i;
  var rand;
  for (i = 1; i < 17; i++) {
    do {
      rand = Math.floor(Math.random() * 16 + 1);
    } while (jQuery.inArray(rand, numbers) !== -1);
    numbers.push(rand);
    var value = "num" + i;
    document.getElementById(value).innerHTML = rand;
  }
  check();
};

function swapValues(number) {
  $("#" + number).addClass("is-primary");
  var a = document.getElementById("temp").innerHTML;
  if (a == "") {
    document.getElementById("temp").innerHTML = document.getElementById(number).innerHTML;
    document.getElementById("temp1").innerHTML = number;
  } else {
    var store = document.getElementById("temp1").innerHTML;
    document.getElementById(store).innerHTML = document.getElementById(number).innerHTML;
    document.getElementById(number).innerHTML = document.getElementById("temp").innerHTML;
    $("#" + number).removeClass("is-primary");
    $("#" + store).removeClass("is-primary");
    document.getElementById("temp").innerHTML = "";
    document.getElementById("temp1").innerHTML = "";
    check();
  }
}

function check() {
  var i = 1;
  var value;
  do {
    value = "num" + i;
    var verify = document.getElementById(value).innerHTML;
    console.log(verify, " ", i);
    if (verify == i) {i++;}
    else {break;}
  } while (i < 17);
  var progress = ((i-1) / 16)*100;
  console.log((i-1), " ", progress);
  $("#progress").attr("value", progress);
  if (progress == 100) {
    $("#congrats").addClass("is-active");
  }
}
function refreshPage(){
    window.location.reload();
}
</script>
